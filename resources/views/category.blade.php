<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Danh mục</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{asset('css/style.css')}}">
    <link rel="stylesheet" href="{{asset('css/owl.carousel.min.css')}}">
    <link rel="stylesheet" href="{{asset('css/font.css')}}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
    .MainLayout_main-layout__riclp .MainLayout_content__hCocE {
        flex-grow: 1;
    }
    .Category_category-page__ioZ0P {
        letter-spacing: 0;
        text-align: left;
        background-color: #fff;
    }
    .CategoryHeader_head__RePR_ {
        position: relative;
        z-index: 1;
    }
    .CategoryHeader_breadcrumb__lwTKe {
        background-color: #ededed;
    } 
    .CategoryHeader_breadcrumb__lwTKe>div>nav>ol {
        padding: 20px 0;
    } 
    .Breadcrumbs_breadcrumbs__04vpL {
        display: flex;
        flex-wrap: wrap;
        list-style: none;
        margin: 0;
        padding: 1rem 0;
    } 
    .Breadcrumbs_breadcrumbs__04vpL .Breadcrumbs_item__e9mbT {
        display: flex;
        align-items: center;
        color: #112950;
        font-weight: 400;
        font-size: 14px;
        line-height: 20px;
        opacity: .3;
    }
    .Breadcrumbs_breadcrumbs__04vpL .Breadcrumbs_item__e9mbT a {
        color: #112950;
        text-decoration: none!important;
    }
    .Breadcrumbs_breadcrumbs__04vpL .Breadcrumbs_item__e9mbT+.Breadcrumbs_item__e9mbT {
        padding-left: 0.5rem;
    }
    .Breadcrumbs_breadcrumbs__04vpL .Breadcrumbs_item-active__3fOia {
        opacity: 1!important;
        font-weight: 500;
    }
    .Breadcrumbs_breadcrumbs__04vpL .Breadcrumbs_item__e9mbT:before {
        font-size: 1rem;
    }
    .Breadcrumbs_breadcrumbs__04vpL .Breadcrumbs_item__e9mbT+.Breadcrumbs_item__e9mbT:before {
        float: left;
        margin-bottom: 7px;
        padding-right: 0.5rem;
        content: url('https://www.pharmacity.vn/icons/breadcrumb-dot.svg');
    }
    .CategoryHeader_title__vwRSd {
        background-color: #f2f6fe;
    }
    .CategoryHeader_title-box__0hY__ {
        padding: 32px 0;
    }
    .CategoryHeader_title-box__0hY__ h1 {
        font-size: 28px;
        font-weight: 700;
        line-height: 36px;
        color: #112950;
        margin: 0 0 12px;
    }
    .CategoryBody_body__4y2Ny {
        position: relative;
        z-index: 0;
    }
    .CategoryBody_box__HV_Lv {
        display: flex;
        justify-content: space-between;
    }
    .CategoryBody_aside__3F9Mg {
        width: 260px;
        border-right: 1px solid #e5e5e5;
        padding-right: 15px;
    }
    .CategoryBody_aside-title__tBKE9 h3 {
        font-size: 24px;
        font-weight: 700;
        line-height: 32px;
        margin: 20px 0 22px 12px;
    }
    .CategoryBody_aside-box__a_bTL {
        max-height: 800px;
        overflow-y: auto;
    }
    .CategoryAside_list-item__RiKxw {
        position: relative;
    }
    .CategoryAside_list-box__kb073 {
        padding: 6px 12px;
        align-items: center;
        border: 1px solid #0000;
        box-sizing: border-box;
        flex-wrap: wrap;
        display: flex;
    }
    .CategoryBody_body__4y2Ny figure, .CategoryBody_body__4y2Ny h3, .CategoryBody_body__4y2Ny p {
        margin: 0;
    }
    .CategoryAside_list-box__kb073>figure {
        flex-shrink: 0;
        width: 52px;
        height: 52px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    }
    .CategoryAside_list-box__kb073>figure img {
        width: 100%;
        height: auto;
    }
    .CategoryAside_list-box__kb073>h3 {
        flex-grow: 1;
        margin-left: 8px;
        margin-right: auto;
        font-size: 14px;
        font-weight: 400;
        line-height: 18px;
        color: #112950;
        cursor: pointer;
        margin-left: 8px!important;
    }
    .Category_category-page__ioZ0P button {
        cursor: pointer;
    }
    .CategoryAside_list-box__kb073>button {
        flex-shrink: 0;
        width: 16px;
        height: 16px;
        align-items: center;
        padding: 0;
        border: none;
        background: none;
        cursor: pointer;
        transition: all .5s;
        transform: rotate(90deg);
        display: flex;
        justify-content: center;
        align-content: center;
    }
    .CategoryBody_product__w5znG {
        width: calc(100% - 290px);
        padding-bottom: 90px;
    }
    .CategoryProduct_product-head__2xuOY {
        position: relative;
        font-style: normal;
        letter-spacing: 0;
        text-align: left;
        margin-top: 20px;
        z-index: 2;
    }
    .justify-content-between {
        justify-content: space-between!important;
    }
    .justify-content-between {
        justify-content: space-between!important;
    }
    .FilterDesktop_capacity__bIsi9, .FilterDesktop_number__W1Hj6, .Selected_body__ESgx_ {
        position: relative;
    }
    .Selected_body__ESgx_ .Selected_select__a9adU #Selected_select-result__h0Gab {
        min-height: 40px;
    }
    .Selected_body__ESgx_ .Selected_select__a9adU ul {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        padding: 0;
        margin: 0;
        gap: 12px;
    }
    .CategoryProduct_product-head__2xuOY ul {
        list-style: none;
        margin: 0;
        padding: 0;
    }
    .Selected_body__ESgx_ .Selected_select__a9adU ul span {
        font-size: 14px;
        font-weight: 400;
        line-height: 24px;
        color: #b2bac6;
    }
    .Sort_sort-mobile__AQTHC {
        display: flex;
        align-items: center;
    }
    .Sort_sort-mobile__AQTHC .Sort_label__IRxqI {
        margin-right: 5px;
        font-size: 11px;
        font-weight: 400;
        line-height: 13px;
        color: #8e9aab;
    }
    .css-2b097c-container {
        position: relative;
        box-sizing: border-box;
    }
    .BasicSelect_react-select-container__jbXSL {
        position: relative;
    }
    @media screen and (min-width: 1200px){
        .Sort_sort-mobile__AQTHC .Sort_label__IRxqI {
            display: none;
        }
        .CategoryBody_product-box__RX9Kt {
            grid-template-columns: repeat(4,minmax(0,1fr))!important;
        }
    }
    .CategoryBody_product-box__RX9Kt {
        margin-top: 20px;
        margin-bottom: 40px;
        position: relative;
        z-index: 1;
    }
    .Recommend_list__UlAi3 {
        display: grid;
        grid-template-columns: repeat(5,minmax(0,1fr));
        grid-gap: 1rem;
    }
    .BasicSelect_react-select-container__jbXSL [class~=react-select__control] {
        border: 0;
        box-shadow: unset;
        cursor: pointer;
    }
    .css-yk16xz-control {
        -webkit-box-align: center;
        align-items: center;
        background-color: rgb(255, 255, 255);
        border-color: rgb(204, 204, 204);
        border-radius: 4px;
        border-style: solid;
        border-width: 1px;
        cursor: default;
        display: flex;
        flex-wrap: wrap;
        -webkit-box-pack: justify;
        justify-content: space-between;
        min-height: 38px;
        position: relative;
        transition: all 100ms ease 0s;
        box-sizing: border-box;
        outline: 0px !important;
    }
    .BasicSelect_react-select-container__jbXSL [class~=react-select__value-container] {
        padding-left: 0;
        min-width: 70px;
    }
    .css-1hwfws3 {
        -webkit-box-align: center;
        align-items: center;
        display: flex;
        flex: 1 1 0%;
        flex-wrap: wrap;
        padding: 2px 8px;
        position: relative;
        overflow: hidden;
        box-sizing: border-box;
    }
    .css-1wa3eu0-placeholder {
        color: rgb(128, 128, 128);
        margin-left: 2px;
        margin-right: 2px;
        
        box-sizing: border-box;
    }

    /**/
    .Recommend_list__UlAi3 .Recommend_list-item__108Zj {
        display: flex;
        width: 100%;
    }
    .Category_category-page__ioZ0P a {
        text-decoration: none;
        color: inherit;
    }
    .ProductItem_product-item__Scx6a {
        box-sizing: border-box;
        outline: 0;
        padding: 0;
        position: relative;
        cursor: pointer;
        text-decoration: none;
        display: block;
        width: 100%;
        height: 100%;
        background: #fff;
        box-shadow: 0 0 12px rgba(15,61,145,.12);
        border-radius: 12px;
    }
    .ProductItem_product-item__Scx6a .ProductItem_head__JbsLQ {
        position: relative;
        margin-bottom: 10px;
        width: 100%;
    }
    .ProductItem_product-item__Scx6a .ProductItem_head__JbsLQ .ProductItem_image__Q5HLa {
        cursor: pointer;
        margin: 0;
        width: 100%;
    }
    .ProductItem_product-item__Scx6a .ProductItem_head__JbsLQ .ProductItem_image__Q5HLa:after {
        display: block;
        content: "";
        width: 100%;
        padding-bottom: 100%;
    }
    .ProductItem_product-item__Scx6a .ProductItem_body__tGvw7 {
        display: flex;
        flex-direction: column;
        width: 100%;
        padding: 12px;
        box-sizing: border-box;
    }
    .ProductItem_product-item__Scx6a .ProductItem_brand-null__Ur1zD {
        height: 42px;
    }
    .ProductItem_product-item__Scx6a .ProductItem_title__dd1Vx {
        position: static;
        left: 0;
        top: 32px;
        flex: none;
        order: 1;
        flex-grow: 0;
        margin: 5px 0;
        font-style: normal;
        font-weight: 600;
        font-size: 1rem;
        line-height: 24px;
        white-space: wrap;
        color: #112950;
        height: 50px;
        display: -webkit-box;
        width: 100%;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
        word-break: break-word;
    }
    .ProductItem_product-item__Scx6a .ProductItem_original-price__Gs0ev {
        display: flex;
        align-items: center;
        position: static;
        flex: none;
        order: 1;
        flex-grow: 0;
        margin: 0;
        width: 100%;
        height: 22px;
        left: 0;
        top: 0;
        font-style: normal;
        font-weight: 400;
        font-size: 1rem;
        line-height: 22px;
        -webkit-text-decoration-line: line-through;
        text-decoration-line: line-through;
        color: #b2bac6;
    }
    .ProductItem_product-item__Scx6a .ProductItem_discount-price__YcO7h {
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: static;
        width: 100%;
        height: 24px;
        left: 0;
        top: 22px;
        flex: none;
        order: 1;
        flex-grow: 0;
        margin: 5px 0;
        font-style: normal;
        font-weight: 700;
        font-size: 1rem;
        line-height: 24px;
        color: #0f62f9;
    }
    .ProductItem_product-item__Scx6a .ProductItem_add-to-card__7P2PF.ProductItem_advise__M7DC8 {
        background-color: #f2f6fe;
        border: 1px solid #0f62f9;
        color: #0065ff;
    }
    .ProductItem_product-item__Scx6a .ProductItem_discount-price__YcO7h .ProductItem_discount-price-style__Z3DG7 {
        font-weight: 400;
    }
    .ProductItem_product-item__Scx6a .ProductItem_add-to-card-disabled__N5pDy {
        background: silver !important;
        cursor: not-allowed !important;
    }
    .justify-content-center {
        justify-content: center!important;
    } 
    .Pagination_order-pagination__jhYzv {
        display: flex;
        justify-content: flex-end;
    }

</style>
</head>
<body>
    @include('partial.header')
    <div class="MainLayout_content__hCocE">
        <nav>
            <div class="Category_category-page__ioZ0P">
                <div class="CategoryHeader_head__RePR_">
                    <div class="CategoryHeader_breadcrumb__lwTKe">
                        <div class="" style="margin-right: auto; padding-left: 3rem;">
                            <nav>
                                <ol class="Breadcrumbs_breadcrumbs__04vpL">
                                    <li class="Breadcrumbs_item__e9mbT">
                                        <a href="">
                                            <span>Trang chủ</span>
                                        </a>
                                    </li>
                                    <li class="Breadcrumbs_item__e9mbT Breadcrumbs_item-active__3fOia">
                                        <a href="">
                                            <span>{{$cate->category_name}}</span>
                                        </a>
                                    </li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                    <div class="CategoryHeader_title__vwRSd">
                        <div class="" style="margin-right: auto; padding-left: 3rem;">
                            <div class="CategoryHeader_title-box__0hY__">
                                <h1>{{$cate->category_name}}</h1>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="CategoryBody_body__4y2Ny">
                    <div class="" style="margin-right: 3rem; padding-left: 3rem;">
                        <div class="CategoryBody_box__HV_Lv">
                            <div class="CategoryBody_aside__3F9Mg">
                                <div class="CategoryBody_aside-title__tBKE9">
                                    <h3>Danh mục</h3>
                                </div>
                                <div class="CategoryBody_aside-box__a_bTL" style="margin-top: 10px">
                                    <div class="CategoryAside_list-item__RiKxw">
                                        @foreach($cate_detail as $detail)
                                        <div class="CategoryAside_list-box__kb073" data-category="{{$detail->category_detail_id}}">
                                            <figure>
                                                <img src="/uploads/category-detail/{{$detail->category_detail_img}}" alt="">
                                            </figure>
                                            <h3>{{$detail->category_detail_name}}</h3>
                                            <button>
                                                <img src="/uploads/image/category-arrow-blue.svg" alt="">
                                            </button>
                                        </div>
                                        @endforeach
                                        
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="CategoryBody_product__w5znG">
                                <div class="CategoryProduct_product-head__2xuOY">
                                    <div class="d-flex justify-content-between">
                                        <div class="Selected_body__ESgx_">
                                            <div class="Selected_select__a9adU">
                                                <ul class="Selected_select-result__h0Gab">
                                                    <span class="Selected_result-label__Oq4ad">Lọc:</span>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="Sort_sort-mobile__AQTHC">
                                            <span class="Sort_label__IRxqI">Sắp xếp:</span>
                                            <div class="BasicSelect_react-select-container__jbXSL css-2b097c-container">
                                                <span class="css-7pg0cj-a11yText"></span>
                                                <div class="react-select__control css-yk16xz-control">
                                                    <div class="react-select__value-container react-select__value-container--has-value css-1hwfws3">
                                                        <select name="sorting" id="sorting" class="">
                                                            <option value="newest">Mới nhất</option>
                                                            <option value="price_desc">Giá giảm dần</option>
                                                            <option value="price_asc">Giá tăng dần</option>
                                                        </select>
                                                        
                                                    </div>
                                                    
                                                </div>
                                                
                                            </div>
                                            
                                        </div>
                                        
                                    </div>
                                </div>
                                <div class="CategoryBody_product-box__RX9Kt Recommend_list__UlAi3 product-list">
                                    @foreach($product as $products)
                                        <div class="lazyload-wrapper product-item" data-category="{{$products->category_detail_id}}">
                                            <input type="hidden" class="category-id" value="{{$products->category_id}}">
                                            <div class="Recommend_list-item__108Zj">
                                                <a href="{{URL::to('/detail/'.$products->product_id)}}" class="ProductItem_product-item__Scx6a">
                                                    <div class="ProductItem_head__JbsLQ">
                                                        <figure class="ProductItem_image__Q5HLa" style="height: 225px">
                                                            <img src="/uploads/product/{{$products->product_img1}}" alt="" style="z-index: 1">
                                                        </figure>
                                                    </div>
                                                    <div class="ProductItem_body__tGvw7">
                                                        <div class="ProductItem_brand-null__Ur1zD"></div>
                                                        <div class="ProductItem_title__dd1Vx">{{$products->product_name}}</div>
                                                        <div class="ProductItem_original-price__Gs0ev"></div>
                                                        <div class="ProductItem_discount-price__YcO7h">
                                                            <span>{{ str_replace(',', '.', number_format($products->product_price)) }} đ

                                                                <span class="ProductItem_discount-price-style__Z3DG7">/{{$products->productUnit}}</span>
                                                            </span>
                                                        </div>
                                                        <button class="ProductItem_add-to-card__7P2PF " style="z-index: 2; position:relative;">Thêm vào giỏ hàng</button>
                                                    </div>
                                                </a>
                                            </div>
                                        </div>
                                    @endforeach
                                </div>
                          
                                <div class="d-flex justify-content-center">
                                    <div class="Pagination_order-pagination__jhYzv">
                                        <div class="Pagination_order-pagination__jhYzv">
                                            {{$product->links('custom_pagination')}}
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>
    <script>
        const sortingDropdown = document.getElementById("sorting");
        sortingDropdown.addEventListener("change", function() {
            const selectedOption = this.value;
            const categoryIdInput = document.querySelector(".product-item input.category-id");
            const categoryId = categoryIdInput.value;
            const productContainer = document.querySelector('.product-list');
    
            fetch(`/filter-products?sorting=${selectedOption}&category_id=${categoryId}`)
                .then(response => response.json())
                .then(data => {
                    productContainer.innerHTML = '';
                    data.products.forEach(product => {
                        const productItem = document.createElement('div');
                        productItem.className = 'product-item'; 
    
                        productItem.innerHTML = `
                                        <div class="lazyload-wrapper product-item" data-category="{{$products->category_detail_id}}">
                                            <input type="hidden" class="category-id" value="{{$products->category_id}}">
                                            <div class="Recommend_list-item__108Zj">
                                                <a href="{{URL::to('/detail/'.$products->product_id)}}" class="ProductItem_product-item__Scx6a">
                                                    <div class="ProductItem_head__JbsLQ">
                                                        <figure class="ProductItem_image__Q5HLa" style="height: 225px">
                                                            <img src="/uploads/product/${product.product_img1}" alt="" style="z-index: 1">
                                                        </figure>
                                                    </div>
                                                    <div class="ProductItem_body__tGvw7">
                                                        <div class="ProductItem_brand-null__Ur1zD"></div>
                                                        <div class="ProductItem_title__dd1Vx">${product.product_name}</div>
                                                        <div class="ProductItem_original-price__Gs0ev"></div>
                                                        <div class="ProductItem_discount-price__YcO7h">
                                                            <span>${numberFormat(product.product_price)} đ
                                                                <span class="ProductItem_discount-price-style__Z3DG7">/{{$products->productUnit}}</span>
                                                            </span>
                                                        </div>
                                                        <button class="ProductItem_add-to-card__7P2PF " style="z-index: 2; position:relative;">Thêm vào giỏ hàng</button>
                                                    </div>
                                                </a>
                                            </div>
                                        </div>

                          
                        `;
    
                        productContainer.appendChild(productItem);
                    });
    
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        });
        function numberFormat(number) {
            return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(number);
        }
    </script>
    
    
    <script>
        $(document).ready(function () {
            $('.CategoryAside_list-box__kb073').click(function () {
                var categoryId = $(this).data('category');
                
                // Hide all product containers
                $('.lazyload-wrapper').hide();
                
                // Show products related to the selected category
                $('.lazyload-wrapper[data-category="' + categoryId + '"]').show();
            });
        });
    </script>
    
</body>
</html>